(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{1720:function(){},6389:function(n,t,e){"use strict";e.d(t,{d:function(){return u}});var r=e(7294);function u(n,t){let e=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==e.current&&null!=n.attributionControl&&(null!=e.current&&n.attributionControl.removeAttribution(e.current),null!=t&&n.attributionControl.addAttribution(t)),e.current=t},[n,t])}},8129:function(n,t,e){"use strict";function r(n,t,e){t.center!==e.center&&n.setLatLng(t.center),null!=t.radius&&t.radius!==e.radius&&n.setRadius(t.radius)}e.d(t,{T:function(){return r}})},9534:function(n,t,e){"use strict";e.d(t,{G5:function(){return c},LE:function(){return l},RA:function(){return i}});var r=e(7294),u=e(3935),o=e(1410);function i(n){return(0,r.forwardRef)(function(t,e){let{instance:u,context:i}=n(t).current;return(0,r.useImperativeHandle)(e,()=>u),null==t.children?null:r.createElement(o.UO,{value:i},t.children)})}function l(n){return(0,r.forwardRef)(function(t,e){let[o,i]=(0,r.useState)(!1),{instance:l}=n(t,i).current;(0,r.useImperativeHandle)(e,()=>l),(0,r.useEffect)(function(){o&&l.update()},[l,o,t.children]);let c=l._contentNode;return c?(0,u.createPortal)(t.children,c):null})}function c(n){return(0,r.forwardRef)(function(t,e){let{instance:u}=n(t).current;return(0,r.useImperativeHandle)(e,()=>u),null})}},1410:function(n,t,e){"use strict";e.d(t,{Hb:function(){return u},UO:function(){return l},mE:function(){return c},sj:function(){return o}});var r=e(7294);function u(n){return Object.freeze({__version:1,map:n})}function o(n,t){return Object.freeze({...n,...t})}let i=(0,r.createContext)(null),l=i.Provider;function c(){let n=(0,r.useContext)(i);if(null==n)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}},7418:function(n,t,e){"use strict";e.d(t,{y:function(){return o}});var r=e(7294),u=e(1410);function o(n){return function(t){let e=(0,u.mE)(),o=n(t,e),{instance:i}=o.current,l=(0,r.useRef)(t.position),{position:c}=t;return(0,r.useEffect)(function(){return i.addTo(e.map),function(){i.remove()}},[e.map,i]),(0,r.useEffect)(function(){null!=c&&c!==l.current&&(i.setPosition(c),l.current=c)},[i,c]),o}}},7999:function(n,t,e){"use strict";e.d(t,{I:function(){return o},O:function(){return u}});var r=e(7294);function u(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function o(n,t){return null==t?function(t,e){let u=(0,r.useRef)();return u.current||(u.current=n(t,e)),u}:function(e,u){let o=(0,r.useRef)();o.current||(o.current=n(e,u));let i=(0,r.useRef)(e),{instance:l}=o.current;return(0,r.useEffect)(function(){i.current!==e&&(t(l,e,i.current),i.current=e)},[l,e,u]),o}}},620:function(n,t,e){"use strict";e.d(t,{t:function(){return u}});var r=e(7294);function u(n,t){let e=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&n.instance.on(t),e.current=t,function(){null!=e.current&&n.instance.off(e.current),e.current=null}},[n,t])}},5769:function(n,t,e){"use strict";e.d(t,{vm:function(){return d},dW:function(){return p},SO:function(){return g},Au:function(){return v},Lf:function(){return m}});var r=e(9534),u=e(7418),o=e(7999),i=e(3655),l=e(6389),c=e(1410),a=e(620),s=e(1802),f=e(7294);function d(n){let t=(0,o.I)(function(t,e){return(0,o.O)(n(t),e)}),e=(0,u.y)(t);return(0,r.G5)(e)}function p(n,t){let e=(0,o.I)(n,t),u=(0,i.u)(e);return(0,r.RA)(u)}function g(n,t){var e;let u=(e=(0,o.I)(n),function(n,r){let u=(0,c.mE)(),o=e((0,s.q)(n,u),u);return(0,l.d)(u.map,n.attribution),(0,a.t)(o.current,n.eventHandlers),t(o.current,u,n,r),o});return(0,r.LE)(u)}function v(n,t){var e;let u=(e=(0,o.I)(n,t),function(n){let t=(0,c.mE)(),r=e((0,s.q)(n,t),t);return(0,a.t)(r.current,n.eventHandlers),(0,i.g)(r.current,t),function(n,t){let e=(0,f.useRef)();(0,f.useEffect)(function(){if(t.pathOptions!==e.current){let r=t.pathOptions??{};n.instance.setStyle(r),e.current=r}},[n,t])}(r.current,n),r});return(0,r.RA)(u)}function m(n,t){let e=(0,o.I)(n,t),u=(0,i.u)(e);return(0,r.G5)(u)}},3655:function(n,t,e){"use strict";e.d(t,{g:function(){return c},u:function(){return a}});var r=e(7294),u=e(6389),o=e(1410),i=e(620),l=e(1802);function c(n,t){(0,r.useEffect)(function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){t.layerContainer?.removeLayer(n.instance),t.map.removeLayer(n.instance)}},[t,n])}function a(n){return function(t){let e=(0,o.mE)(),r=n((0,l.q)(t,e),e);return(0,u.d)(e.map,t.attribution),(0,i.t)(r.current,t.eventHandlers),c(r.current,e),r}}},1802:function(n,t,e){"use strict";function r(n,t){let e=n.pane??t.pane;return e?{...n,pane:e}:n}e.d(t,{q:function(){return r}})},4989:function(n,t,e){"use strict";e.r(t);var r=e(5893),u=e(7294),o=e(5152),i=e(9153),l=e(577),c=e(4049),a=e(7262),s=e(269),f=e(9222);e(1720);let d=o(()=>e.e(614).then(e.bind(e,3614)).then(n=>n.MapContainer),{loadableGenerated:{webpack:()=>[require.resolveWeak("react-leaflet")]},ssr:!1}),p=o(()=>e.e(614).then(e.bind(e,3614)).then(n=>n.TileLayer),{loadableGenerated:{webpack:()=>[require.resolveWeak("react-leaflet")]},ssr:!1});function g(n){let{pinPoint:t,setPinPoint:e,answerShown:r,dest:o,gameOptions:l,ws:c,multiplayerState:a,playSound:s}=n,f=u.useRef(a),d=u.useRef(c);(0,u.useEffect)(()=>{f.current=a},[a]),(0,u.useEffect)(()=>{d.current=c},[c]);let p=(0,i.zV)({click(n){var t,u,o;let i=f.current,l=d.current;if(!r&&(!(null==i?void 0:i.inGame)||(null==i?void 0:i.inGame)&&!(null==i?void 0:null===(u=i.gameData)||void 0===u?void 0:null===(t=u.players.find(n=>{var t;return n.id===(null==i?void 0:null===(t=i.gameData)||void 0===t?void 0:t.myId)}))||void 0===t?void 0:t.final))){if(e(n.latlng),(null==i?void 0:i.inGame)&&(null===(o=i.gameData)||void 0===o?void 0:o.state)==="guess"&&l){let t=[n.latlng.lat,n.latlng.lng];l.send(JSON.stringify({type:"place",latLong:t,final:!1}))}s();let t=L.latLngBounds([-90,-180],[90,180]);t.contains(n.latlng)||n.target.panInsideBounds(t,{animate:!0})}}});(0,u.useEffect)(()=>{let n=null==l?void 0:l.extent;p&&!r&&setTimeout(()=>{if(n){let t=L.latLngBounds([n[1],n[0]],[n[3],n[2]]);p.fitBounds(t)}else p.setView([30,0],2)},500)},[null==l?void 0:l.extent,r,p]),(0,u.useEffect)(()=>{t&&setTimeout(()=>{let n=L.latLngBounds([t,{lat:o.lat,lng:o.long}]).pad(.5);p.flyToBounds(n,{duration:.5})},300)},[r]),(0,u.useEffect)(()=>{let n=setInterval(()=>{p.invalidateSize()},5);return()=>clearInterval(n)},[p])}t.default=n=>{var t,e,o;let{shown:i,options:v,ws:m,session:h,pinPoint:y,setPinPoint:x,answerShown:E,location:b,setKm:O,guessing:j,multiplayerSentGuess:C,multiplayerState:I,showHint:w,round:R,focused:z,gameOptions:A}=n,S=u.useRef(null),T=u.useRef(),{t:k}=(0,f.$)("common"),_=L.icon({iconUrl:"./dest.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),G=L.icon({iconUrl:"./src.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}),H=L.icon({iconUrl:"./src2.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});(0,u.useEffect)(()=>{if(E&&y&&b){let n=y.distanceTo({lat:b.lat,lng:b.long})/1e3;O(n=n>100?Math.round(n):n>10?parseFloat(n.toFixed(1)):parseFloat(n.toFixed(2)))}},[E,y,b]);let B=L.latLng(-180,-360),D=L.latLng(180,360);return L.latLngBounds(B,D),(0,r.jsxs)(d,{center:[0,0],zoom:2,minZoom:2,style:{height:"100%",width:"100%"},whenCreated:n=>{S.current=n},children:[(0,r.jsx)("div",{className:"mapAttr",children:(0,r.jsx)("img",{width:"60",src:"https://lh3.googleusercontent.com/d_S5gxu_S1P6NR1gXeMthZeBzkrQMHdI5uvXrpn3nfJuXpCjlqhLQKH_hbOxTHxFhp5WugVOEcl4WDrv9rmKBDOMExhKU5KmmLFQVg"})}),(0,r.jsx)(g,{playSound:()=>{T.current.play()},pinPoint:y,setPinPoint:x,answerShown:E,dest:b,gameOptions:A,ws:m,multiplayerState:I}),b&&E&&(0,r.jsx)(l.J,{position:{lat:b.lat,lng:b.long},icon:_}),y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.J,{position:y,icon:G,children:(0,r.jsx)(c.u,{direction:"top",offset:[0,-45],opacity:1,permanent:!0,position:{lat:y.lat,lng:y.lng},children:k("yourGuess")})}),E&&b&&(0,r.jsx)(a.a,{positions:[y,{lat:b.lat,lng:b.long}]})]}),(null==I?void 0:I.inGame)&&E&&b&&(null==I?void 0:null===(t=I.gameData)||void 0===t?void 0:t.players.map((n,t)=>{var e;if(n.id===(null==I?void 0:null===(e=I.gameData)||void 0===e?void 0:e.myId)||!n.guess)return null;n.username;let u=[n.guess[0],n.guess[1]];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.J,{position:{lat:u[0],lng:u[1]},icon:H,children:(0,r.jsx)(c.u,{direction:"top",offset:[0,-45],opacity:1,permanent:!0,position:{lat:u[0],lng:u[1]},children:(0,r.jsx)("span",{style:{color:"black"},children:n.username})})},2*t),(0,r.jsx)(a.a,{positions:[{lat:u[0],lng:u[1]},{lat:b.lat,lng:b.long}],color:"green"},2*t+1)]})})),w&&b&&(0,r.jsx)(s.C,{center:{lat:b.lat,lng:b.long},radius:250*(null==A?void 0:A.maxDist)}),(0,r.jsx)(p,{noWrap:!0,url:"https://mt2.google.com/vt/lyrs=".concat(null!==(o=null==v?void 0:v.mapType)&&void 0!==o?o:"m","&x={x}&y={y}&z={z}&hl=").concat(k("lang"))}),(0,r.jsx)("audio",{ref:T,src:"/plop.mp3",preload:"auto"})]})}},269:function(n,t,e){"use strict";e.d(t,{C:function(){return c}});var r=e(5769),u=e(7999),o=e(1410),i=e(8129),l=e(5243);let c=(0,r.Au)(function({center:n,children:t,...e},r){let i=new l.Circle(n,e);return(0,u.O)(i,(0,o.sj)(r,{overlayContainer:i}))},i.T)},577:function(n,t,e){"use strict";e.d(t,{J:function(){return l}});var r=e(5769),u=e(7999),o=e(1410),i=e(5243);let l=(0,r.dW)(function({position:n,...t},e){let r=new i.Marker(n,t);return(0,u.O)(r,(0,o.sj)(e,{overlayContainer:r}))},function(n,t,e){t.position!==e.position&&n.setLatLng(t.position),null!=t.icon&&t.icon!==e.icon&&n.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==e.zIndexOffset&&n.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==e.opacity&&n.setOpacity(t.opacity),null!=n.dragging&&t.draggable!==e.draggable&&(!0===t.draggable?n.dragging.enable():n.dragging.disable())})},7262:function(n,t,e){"use strict";e.d(t,{a:function(){return l}});var r=e(5769),u=e(7999),o=e(1410),i=e(5243);let l=(0,r.Au)(function({positions:n,...t},e){let r=new i.Polyline(n,t);return(0,u.O)(r,(0,o.sj)(e,{overlayContainer:r}))},function(n,t,e){t.positions!==e.positions&&n.setLatLngs(t.positions)})},4049:function(n,t,e){"use strict";e.d(t,{u:function(){return l}});var r=e(5769),u=e(7999),o=e(5243),i=e(7294);let l=(0,r.SO)(function(n,t){let e=new o.Tooltip(n,t.overlayContainer);return(0,u.O)(e,t)},function(n,t,{position:e},r){(0,i.useEffect)(function(){let u=t.overlayContainer;if(null==u)return;let{instance:o}=n,i=n=>{n.tooltip===o&&(null!=e&&o.setLatLng(e),o.update(),r(!0))},l=n=>{n.tooltip===o&&r(!1)};return u.on({tooltipopen:i,tooltipclose:l}),u.bindTooltip(o),function(){u.off({tooltipopen:i,tooltipclose:l}),null!=u._map&&u.unbindTooltip()}},[n,t,r,e])})},9153:function(n,t,e){"use strict";e.d(t,{$_:function(){return i},Sx:function(){return o},zV:function(){return l}});var r=e(1410),u=e(7294);function o(){return(0,r.mE)().map}function i(n,t){let e=o();return(0,u.useEffect)(function(){return e.on(n,t),function(){e.off(n,t)}},[e,n,t]),e}function l(n){let t=o();return(0,u.useEffect)(function(){return t.on(n),function(){t.off(n)}},[t,n]),t}}}]);